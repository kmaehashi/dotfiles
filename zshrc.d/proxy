# Proxy

# setup proxy environment
proxy_init() {
  if [ ! -z "${PROXY}" ]; then
    export ALL_PROXY="${PROXY}"
    export http_proxy="${ALL_PROXY}"
    export https_proxy="${ALL_PROXY}"
    export ftp_proxy="${ALL_PROXY}"
    alias telnetp="nc -X connect -x '${http_proxy}' -C -v"
    alias sshp="ssh -oProxyCommand=\"nc -X connect -x '${http_proxy}' %h %p\""
    alias sshnp="ssh -oProxyCommand=none"
  fi
}

# disable proxy for this session
proxy_reset() {
  unset ALL_PROXY
  unset http_proxy
  unset https_proxy
  unset ftp_proxy
  unalias telnetp
  unalias sshp
  unalias sshnp
}

proxy_init
